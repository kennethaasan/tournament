openapi: 3.1.0
info:
  title: Tournament Administration API (Phase One)
  version: 0.1.0
  description: REST contract for the modern football tournament administration application. Covers admin, team manager, and public scoreboard surfaces required for phase one delivery.
  contact:
    name: Kenneth Aasan
    email: kenneth@aasan.dev
servers:
  - url: https://api.tournament.local
    description: Local development
    x-internal: false
tags:
  - name: auth
    description: Authentication and invitations
  - name: competitions
    description: Competition and edition management
  - name: entries
    description: Entry reviews and registrations
  - name: scheduling
    description: Scheduling and results workflows
  - name: teams
    description: Team and squad management
  - name: venues
    description: Venue management
  - name: notifications
    description: Notification center APIs
  - name: public
    description: Public scoreboard and event feeds
x-templates:
  standardResponseHeaders: &standardResponseHeaders
    Access-Control-Allow-Origin:
      $ref: '#/components/headers/Access-Control-Allow-Origin'
    RateLimit-Limit:
      $ref: '#/components/headers/RateLimit-Limit'
    RateLimit-Remaining:
      $ref: '#/components/headers/RateLimit-Remaining'
    RateLimit-Reset:
      $ref: '#/components/headers/RateLimit-Reset'
  standardErrorResponses: &standardErrorResponses
    '400':
      $ref: '#/components/responses/ProblemDetails'
    '401':
      $ref: '#/components/responses/ProblemDetails'
    '429':
      $ref: '#/components/responses/TooManyRequests'
    '500':
      $ref: '#/components/responses/InternalServerError'

paths:
  /api/auth/invitations:
    post:
      tags:
        - auth
      summary: Invite a new organizer or team manager
      description: Invite a new organizer or team manager
      operationId: create_invitation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvitationRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Invitation created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invitation'
          headers: *standardResponseHeaders
  /api/auth/invitations/accept:
    post:
      tags:
        - auth
      summary: Accept an invitation
      description: Accept an invitation
      operationId: accept_invitation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcceptInvitationRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Invitation accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcceptInvitationResponse'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
        '409':
          $ref: '#/components/responses/ProblemDetails'
        '410':
          $ref: '#/components/responses/ProblemDetails'
  /api/competitions:
    get:
      tags:
        - competitions
      summary: List accessible competitions
      description: List accessible competitions
      operationId: list_competitions
      responses:
        <<: *standardErrorResponses
        '200':
          description: Competition list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompetitionListResponse'
          headers: *standardResponseHeaders
    post:
      tags:
        - competitions
      summary: Create a new competition and initial edition
      description: Create a new competition and initial edition
      operationId: create_competition
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCompetitionRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Competition and draft edition created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompetitionWithEdition'
          headers: *standardResponseHeaders
        '422':
          $ref: '#/components/responses/ProblemDetails'
  /api/competitions/{competition_id}:
    get:
      tags:
        - competitions
      summary: Fetch competition with editions and roles
      description: Fetch competition with editions and roles
      operationId: get_competition
      parameters:
        - $ref: '#/components/parameters/CompetitionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Competition detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompetitionDetail'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/competitions/{competition_id}/editions:
    post:
      tags:
        - competitions
      summary: Create a new edition inside a competition
      description: Create a new edition inside a competition
      operationId: create_edition
      parameters:
        - $ref: '#/components/parameters/CompetitionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEditionRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Edition created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Edition'
          headers: *standardResponseHeaders
        '409':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}:
    get:
      tags:
        - competitions
      summary: Fetch edition scoreboard configuration
      description: Fetch edition scoreboard configuration
      operationId: get_edition_scoreboard
      parameters:
        - $ref: '#/components/parameters/EditionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Edition scoreboard configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditionScoreboardView'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
    patch:
      tags:
        - competitions
      summary: Update edition settings
      description: Update edition settings
      operationId: update_edition
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEditionRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Edition updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditionScoreboardView'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/entries:
    get:
      tags:
        - entries
      summary: List entries for an edition
      description: List entries for an edition
      operationId: list_edition_entries
      parameters:
        - $ref: '#/components/parameters/EditionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Edition entries
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntryReviewListResponse'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/stages:
    get:
      tags:
        - competitions
      summary: List stages for an edition
      description: List stages for an edition
      operationId: list_stages
      parameters:
        - $ref: '#/components/parameters/EditionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Edition stages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StageListResponse'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
    post:
      tags:
        - competitions
      summary: Create a stage (group or knockout)
      description: Create a stage (group or knockout)
      operationId: create_stage
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStageRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Stage created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Stage'
          headers: *standardResponseHeaders
    patch:
      tags:
        - competitions
      summary: Reorder stages for an edition
      description: Reorder stages for an edition
      operationId: reorder_stages
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReorderStagesRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Edition stages reordered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StageListResponse'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/stages/{stage_id}:
    delete:
      tags:
        - competitions
      summary: Delete a stage
      description: Delete a stage and all its associated groups. Only stages without matches can be deleted.
      operationId: delete_stage
      parameters:
        - $ref: '#/components/parameters/EditionId'
        - $ref: '#/components/parameters/StageId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Stage deleted
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
        '409':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/matches/bulk:
    post:
      tags:
        - scheduling
      summary: Generate matches for selected stage
      description: Generate matches for selected stage
      operationId: generate_matches
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateMatchesRequest'
      responses:
        <<: *standardErrorResponses
        '202':
          description: Match generation accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerationJob'
          headers: *standardResponseHeaders
        '422':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/scoreboard/highlights:
    post:
      tags:
        - competitions
      summary: Trigger a scoreboard highlight overlay
      description: Trigger a scoreboard highlight overlay
      operationId: trigger_scoreboard_highlight
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TriggerScoreboardHighlightRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Highlight activated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditionScoreboardView'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - competitions
      summary: Clear the active scoreboard highlight
      description: Clear the active scoreboard highlight
      operationId: clear_scoreboard_highlight
      parameters:
        - $ref: '#/components/parameters/EditionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Highlight cleared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditionScoreboardView'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/matches:
    get:
      tags:
        - scheduling
      summary: List matches with filters
      description: List matches with filters
      operationId: list_matches
      parameters:
        - $ref: '#/components/parameters/EditionId'
        - $ref: '#/components/parameters/StageIdOptional'
        - $ref: '#/components/parameters/MatchStatus'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Matches for edition
          content:
            application/json:
              schema:
                type: object
                properties:
                  matches:
                    type: array
                    items:
                      $ref: '#/components/schemas/Match'
                    maxItems: 200
          headers: *standardResponseHeaders
    post:
      tags:
        - scheduling
      summary: Create a single match manually
      description: Create a single match manually without using the bulk generation wizard
      operationId: create_match
      parameters:
        - $ref: '#/components/parameters/EditionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMatchRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Match created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Match'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
        '422':
          $ref: '#/components/responses/ProblemDetails'
  /api/editions/{edition_id}/venues:
    get:
      tags:
        - venues
      summary: List venues for an edition
      description: List venues for an edition
      operationId: list_edition_venues
      parameters:
        - $ref: '#/components/parameters/EditionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Venues available for the edition
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VenueListResponse'
          headers: *standardResponseHeaders
  /api/matches/{match_id}:
    get:
      tags:
        - scheduling
      summary: Fetch a match with events
      description: Fetch a match with events
      operationId: get_match
      parameters:
        - $ref: '#/components/parameters/MatchId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Match details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Match'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
    patch:
      tags:
        - scheduling
      summary: Update match details or result
      description: Update match details or result
      operationId: update_match
      parameters:
        - $ref: '#/components/parameters/MatchId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMatchRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Match updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Match'
          headers: *standardResponseHeaders
        '409':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - scheduling
      summary: Delete match
      description: Delete match and its associated events
      operationId: delete_match
      parameters:
        - $ref: '#/components/parameters/MatchId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Match deleted
          headers: *standardResponseHeaders
  /api/matches/{match_id}/disputes:
    post:
      tags:
        - scheduling
      summary: Submit a dispute for a finalized match
      description: Submit a dispute for a finalized match
      operationId: submit_dispute
      parameters:
        - $ref: '#/components/parameters/MatchId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDisputeRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Dispute recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dispute'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/teams:
    get:
      tags:
        - teams
      summary: List accessible teams
      description: List accessible teams
      operationId: list_teams
      responses:
        <<: *standardErrorResponses
        '200':
          description: Team list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamListResponse'
          headers: *standardResponseHeaders
    post:
      tags:
        - teams
      summary: Create or import a reusable team
      description: Create or import a reusable team
      operationId: create_team
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTeamRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Team created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
          headers: *standardResponseHeaders
        '409':
          $ref: '#/components/responses/ProblemDetails'
  /api/competitions/{competition_id}/venues:
    get:
      tags:
        - venues
      summary: List venues for a competition
      description: List venues for a competition
      operationId: list_competition_venues
      parameters:
        - $ref: '#/components/parameters/CompetitionId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Competition venues
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VenueListResponse'
          headers: *standardResponseHeaders
    post:
      tags:
        - venues
      summary: Create a venue
      description: Create a venue
      operationId: create_venue
      parameters:
        - $ref: '#/components/parameters/CompetitionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVenueRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Venue created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Venue'
          headers: *standardResponseHeaders
        '409':
          $ref: '#/components/responses/ProblemDetails'
  /api/venues/{venue_id}:
    patch:
      tags:
        - venues
      summary: Update a venue
      description: Update a venue
      operationId: update_venue
      parameters:
        - $ref: '#/components/parameters/VenueId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVenueRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Venue updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Venue'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - venues
      summary: Delete a venue
      description: Delete a venue
      operationId: delete_venue
      parameters:
        - $ref: '#/components/parameters/VenueId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Venue deleted
          headers: *standardResponseHeaders
  /api/teams/{team_id}:
    get:
      tags:
        - teams
      summary: Fetch a team's roster
      description: Fetch a team's roster
      operationId: get_team_roster
      parameters:
        - $ref: '#/components/parameters/TeamId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Team roster
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamRoster'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
    patch:
      tags:
        - teams
      summary: Update team details
      description: Update team details
      operationId: update_team
      parameters:
        - $ref: '#/components/parameters/TeamId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTeamRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Team updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
        '409':
          $ref: '#/components/responses/ProblemDetails'
  /api/teams/{team_id}/members:
    post:
      tags:
        - teams
      summary: Add a member to a team roster
      description: Add a member to a team roster
      operationId: add_team_member
      parameters:
        - $ref: '#/components/parameters/TeamId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddTeamMemberRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Member added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamMember'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/teams/{team_id}/members/{membership_id}:
    patch:
      tags:
        - teams
      summary: Update a team member
      description: Update a team member
      operationId: update_team_member
      parameters:
        - $ref: '#/components/parameters/TeamId'
        - $ref: '#/components/parameters/MembershipId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTeamMemberRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Member updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TeamMember'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - teams
      summary: Remove a member from a team roster
      description: Remove a member from a team roster
      operationId: remove_team_member
      parameters:
        - $ref: '#/components/parameters/TeamId'
        - $ref: '#/components/parameters/MembershipId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Member removed
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/teams/{team_id}/entries:
    post:
      tags:
        - teams
      summary: Register a team into an edition (self-service onboarding)
      description: Register a team into an edition (self-service onboarding)
      operationId: register_entry
      parameters:
        - $ref: '#/components/parameters/TeamId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterEntryRequest'
      responses:
        <<: *standardErrorResponses
        '201':
          description: Entry created awaiting approval
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntryWithSquad'
          headers: *standardResponseHeaders
  /api/entries/{entry_id}:
    patch:
      tags:
        - teams
      summary: Update entry status
      description: Update entry status
      operationId: update_entry_status
      parameters:
        - $ref: '#/components/parameters/EntryId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEntryStatusRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Entry updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Entry'
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - entries
      summary: Delete a rejected or withdrawn entry
      description: Delete a rejected or withdrawn entry. Only entries with status 'rejected' or 'withdrawn' can be deleted.
      operationId: delete_entry
      parameters:
        - $ref: '#/components/parameters/EntryId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Entry deleted
          headers: *standardResponseHeaders
        '403':
          $ref: '#/components/responses/ProblemDetails'
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/entries/{entry_id}/squads:
    put:
      tags:
        - teams
      summary: Ensure squad exists and optionally lock it
      description: Ensure squad exists and optionally lock it
      operationId: upsert_squad
      parameters:
        - $ref: '#/components/parameters/EntryId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSquadRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Squad state updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Squad'
          headers: *standardResponseHeaders
  /api/squads/{squad_id}/members:
    get:
      tags:
        - teams
      summary: List squad members
      description: List squad members
      operationId: list_squad_members
      parameters:
        - $ref: '#/components/parameters/SquadId'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Squad members
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SquadMemberListResponse'
          headers: *standardResponseHeaders
    post:
      tags:
        - teams
      summary: Add or update a squad member
      description: Add or update a squad member
      operationId: add_squad_member
      parameters:
        - $ref: '#/components/parameters/SquadId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddSquadMemberRequest'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Member saved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SquadMember'
          headers: *standardResponseHeaders
  /api/squads/{squad_id}/members/{member_id}:
    patch:
      tags:
        - teams
      summary: Update a squad member
      description: Update a squad member's jersey number or position
      operationId: update_squad_member
      parameters:
        - $ref: '#/components/parameters/SquadId'
        - $ref: '#/components/parameters/SquadMemberId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                jersey_number:
                  type: integer
                  nullable: true
                position:
                  type: string
                  nullable: true
                availability:
                  type: string
                  enum: [available, doubtful, injured, suspended]
                notes:
                  type: string
                  nullable: true
      responses:
        <<: *standardErrorResponses
        '200':
          description: Member updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SquadMember'
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
    delete:
      tags:
        - teams
      summary: Remove a member from a squad
      description: Remove a member from an edition squad. Does not affect the global roster.
      operationId: remove_squad_member
      parameters:
        - $ref: '#/components/parameters/SquadId'
        - $ref: '#/components/parameters/SquadMemberId'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Member removed
          headers: *standardResponseHeaders
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/notifications:
    get:
      tags:
        - notifications
      summary: List notifications for the authenticated user
      description: List notifications for the authenticated user
      operationId: list_notifications
      parameters:
        - $ref: '#/components/parameters/NotificationCursor'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Notifications feed
          headers:
            <<: *standardResponseHeaders
            ETag:
              description: Cache validator for notification feed
              schema:
                type: string
                maxLength: 2048
                pattern: ^.{0,2048}$
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                    maxItems: 200
                  next_cursor:
                    type: string
                    nullable: true
                    maxLength: 2048
                    pattern: ^.{0,2048}$
    patch:
      tags:
        - notifications
      summary: Bulk mark notifications as read
      description: Bulk mark notifications as read
      operationId: mark_notifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarkNotificationsRequest'
      responses:
        <<: *standardErrorResponses
        '204':
          description: Notifications updated
          headers: *standardResponseHeaders
  /api/public/competitions/{competition_slug}/editions/{edition_slug}/scoreboard:
    get:
      tags:
        - public
      summary: Fetch public scoreboard payload for big-screen display
      description: Fetch public scoreboard payload for big-screen display
      operationId: get_scoreboard
      parameters:
        - $ref: '#/components/parameters/CompetitionSlug'
        - $ref: '#/components/parameters/EditionSlug'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Scoreboard payload
          headers:
            <<: *standardResponseHeaders
            ETag:
              description: Cache validator for scoreboard polling
              schema:
                type: string
                maxLength: 2048
                pattern: ^.{0,2048}$
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScoreboardPayload'
        '404':
          $ref: '#/components/responses/ProblemDetails'
  /api/public/events:
    get:
      tags:
        - public
      summary: Poll-based event feed for real-time updates
      description: Poll-based event feed for real-time updates
      operationId: get_event_feed
      parameters:
        - $ref: '#/components/parameters/EventCursor'
      responses:
        <<: *standardErrorResponses
        '200':
          description: Incremental event payload
          headers:
            <<: *standardResponseHeaders
            ETag:
              description: Cache validator for event feed
              schema:
                type: string
                maxLength: 2048
                pattern: ^.{0,2048}$
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventFeed'
components:
  parameters:
    CompetitionId:
      name: competition_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    EditionId:
      name: edition_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    StageIdOptional:
      name: stage_id
      in: query
      schema:
        type: string
        format: uuid
        maxLength: 36
      description: Filter matches for a specific stage
    StageId:
      name: stage_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    MatchStatus:
      name: status
      in: query
      schema:
        $ref: '#/components/schemas/MatchStatus'
    MatchId:
      name: match_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    VenueId:
      name: venue_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    TeamId:
      name: team_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    MembershipId:
      name: membership_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    EntryId:
      name: entry_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    SquadId:
      name: squad_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    SquadMemberId:
      name: member_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        maxLength: 36
    NotificationCursor:
      name: cursor
      in: query
      schema:
        type: string
        maxLength: 2048
        pattern: ^.{0,2048}$
      description: Continue notification pagination
    EditionSlug:
      name: edition_slug
      in: path
      required: true
      schema:
        type: string
        description: Edition slug (e.g. 2025)
        maxLength: 2048
        pattern: ^.{0,2048}$
    CompetitionSlug:
      name: competition_slug
      in: path
      required: true
      schema:
        type: string
        maxLength: 2048
        pattern: ^.{0,2048}$
    EventCursor:
      name: cursor
      in: query
      schema:
        type: string
        maxLength: 2048
        pattern: ^.{0,2048}$
      description: Cursor token for incremental events
  responses:
    ProblemDetails:
      description: Problem Details error payload
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
      headers: *standardResponseHeaders
    TooManyRequests:
      description: The client has sent too many requests in a given amount of time.
      headers:
        <<: *standardResponseHeaders
        Retry-After:
          $ref: '#/components/headers/Retry-After'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
    InternalServerError:
      description: The server encountered an unexpected error.
      headers: *standardResponseHeaders
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
  schemas:
    ProblemDetails:
      type: object
      required:
        - type
        - title
        - status
      properties:
        type:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        title:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        status:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        detail:
          type: string
          maxLength: 2000
          pattern: ^.{0,2000}$
        instance:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
              maxLength: 2048
              pattern: ^.{0,2048}$
            maxItems: 200
    Invitation:
      type: object
      required:
        - id
        - email
        - role
        - scope
        - expires_at
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        email:
          type: string
          format: email
          maxLength: 254
        role:
          type: string
          enum:
            - global_admin
            - competition_admin
            - team_manager
        scope:
          type: object
          required:
            - type
          properties:
            type:
              type: string
              enum:
                - global
                - competition
                - edition
                - team
            id:
              type: string
              format: uuid
              nullable: true
              maxLength: 36
        expires_at:
          type: string
          format: date-time
          maxLength: 30
        token:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        accept_url:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
    RoleAssignment:
      type: object
      required:
        - role
        - scope
      properties:
        role:
          type: string
          enum:
            - global_admin
            - competition_admin
            - team_manager
        scope:
          $ref: '#/components/schemas/InvitationScope'
    AcceptInvitationRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
    AcceptInvitationResponse:
      type: object
      required:
        - invitation
        - role
      properties:
        invitation:
          $ref: '#/components/schemas/Invitation'
        role:
          $ref: '#/components/schemas/RoleAssignment'
    CreateInvitationRequest:
      type: object
      required:
        - email
        - role
        - scope
      properties:
        email:
          type: string
          format: email
          maxLength: 254
        role:
          type: string
          enum:
            - global_admin
            - competition_admin
            - team_manager
        scope:
          $ref: '#/components/schemas/InvitationScope'
        message:
          type: string
          maxLength: 500
          pattern: ^.{0,500}$
        expires_at:
          type: string
          format: date-time
          maxLength: 30
    InvitationScope:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            - global
            - competition
            - edition
            - team
        id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
    CompetitionWithEdition:
      type: object
      required:
        - competition
        - edition
      properties:
        competition:
          $ref: '#/components/schemas/Competition'
        edition:
          $ref: '#/components/schemas/Edition'
    CompetitionDetail:
      allOf:
        - $ref: '#/components/schemas/Competition'
        - type: object
          properties:
            editions:
              type: array
              items:
                $ref: '#/components/schemas/Edition'
              maxItems: 200
            administrators:
              type: array
              items:
                $ref: '#/components/schemas/UserSummary'
              maxItems: 200
    Competition:
      type: object
      required:
        - id
        - name
        - slug
        - created_at
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        primary_venue_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        scoreboard_theme:
          $ref: '#/components/schemas/ScoreboardTheme'
        created_at:
          type: string
          format: date-time
          maxLength: 30
    CreateCompetitionRequest:
      type: object
      required:
        - name
        - slug
        - default_edition
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        default_edition:
          $ref: '#/components/schemas/CreateEditionRequest'
    Edition:
      type: object
      required:
        - id
        - competition_id
        - label
        - slug
        - status
        - registration_window
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        competition_id:
          type: string
          format: uuid
          maxLength: 36
        competition_slug:
          type: string
          description: Competition slug for contextual scoreboard links
          maxLength: 120
          pattern: ^.{0,120}$
        competition_name:
          type: string
          description: Competition display name
          maxLength: 2048
          pattern: ^.{0,2048}$
        label:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        status:
          type: string
          enum:
            - draft
            - published
            - archived
        format:
          type: string
          enum:
            - round_robin
            - knockout
            - hybrid
        registration_window:
          $ref: '#/components/schemas/RegistrationWindow'
        scoreboard_rotation_seconds:
          type: integer
          minimum: 2
          default: 5
          format: int32
          maximum: 2147483647
        scoreboard_modules:
          type: array
          items:
            type: string
            enum:
              - live_matches
              - upcoming
              - standings
              - top_scorers
          maxItems: 200
        scoreboard_theme:
          $ref: '#/components/schemas/ScoreboardTheme'
        entries_locked_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        published_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
    CreateEditionRequest:
      type: object
      required:
        - label
        - slug
        - format
        - registration_window
      properties:
        label:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        format:
          type: string
          enum:
            - round_robin
            - knockout
            - hybrid
        registration_window:
          $ref: '#/components/schemas/RegistrationWindow'
        scoreboard_theme:
          $ref: '#/components/schemas/ScoreboardTheme'
    UpdateEditionRequest:
      type: object
      properties:
        label:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        status:
          type: string
          enum:
            - draft
            - published
            - archived
        format:
          type: string
          enum:
            - round_robin
            - knockout
            - hybrid
        timezone:
          type: string
          maxLength: 64
        registration_window:
          $ref: '#/components/schemas/RegistrationWindow'
        contact_email:
          type: string
          format: email
          maxLength: 320
          nullable: true
        contact_phone:
          type: string
          maxLength: 32
          nullable: true
        scoreboard_rotation_seconds:
          type: integer
          minimum: 2
          format: int32
          maximum: 2147483647
        scoreboard_modules:
          type: array
          items:
            type: string
            enum:
              - live_matches
              - upcoming
              - standings
              - top_scorers
          maxItems: 200
        scoreboard_theme:
          $ref: '#/components/schemas/ScoreboardTheme'
        entries_locked:
          type: boolean
    ScoreboardTheme:
      type: object
      properties:
        primary_color:
          type: string
          pattern: ^#([A-Fa-f0-9]{6})$
          maxLength: 2048
        secondary_color:
          type: string
          pattern: ^#([A-Fa-f0-9]{6})$
          maxLength: 2048
        background_image_url:
          type: string
          format: uri
          nullable: true
          maxLength: 2048
    EditionScoreboardHighlight:
      type: object
      required:
        - message
        - expires_at
        - remaining_seconds
      properties:
        message:
          type: string
          maxLength: 2000
          pattern: ^.{0,2000}$
        expires_at:
          type: string
          format: date-time
          maxLength: 30
        remaining_seconds:
          type: integer
          minimum: 0
          format: int32
          maximum: 2147483647
    EditionScoreboardView:
      type: object
      required:
        - edition
        - highlight
      properties:
        edition:
          $ref: '#/components/schemas/Edition'
        highlight:
          $ref: '#/components/schemas/EditionScoreboardHighlight'
          nullable: true
    TriggerScoreboardHighlightRequest:
      type: object
      required:
        - message
        - duration_seconds
      properties:
        message:
          type: string
          maxLength: 160
          pattern: ^.{0,160}$
        duration_seconds:
          type: integer
          minimum: 5
          maximum: 600
          format: int32
    RegistrationWindow:
      type: object
      properties:
        opens_at:
          type: string
          format: date-time
          maxLength: 30
        closes_at:
          type: string
          format: date-time
          maxLength: 30
    Stage:
      type: object
      required:
        - id
        - edition_id
        - name
        - stage_type
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        edition_id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        stage_type:
          type: string
          enum:
            - group
            - bracket
        order:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        groups:
          type: array
          items:
            $ref: '#/components/schemas/Group'
          maxItems: 200
        published_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
    StageListResponse:
      type: object
      required:
        - stages
      properties:
        stages:
          type: array
          items:
            $ref: '#/components/schemas/Stage'
          maxItems: 200
    CreateStageRequest:
      type: object
      required:
        - name
        - stage_type
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        stage_type:
          type: string
          enum:
            - group
            - bracket
        groups:
          type: array
          description: Required for group stages
          items:
            $ref: '#/components/schemas/CreateGroupRequest'
          maxItems: 200
    ReorderStagesRequest:
      type: object
      required:
        - stage_ids
      properties:
        stage_ids:
          type: array
          items:
            type: string
            format: uuid
            maxLength: 36
          maxItems: 200
    Group:
      type: object
      required:
        - id
        - code
        - name
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        code:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        standings:
          type: array
          items:
            $ref: '#/components/schemas/Standing'
          maxItems: 200
    CreateGroupRequest:
      type: object
      required:
        - code
        - name
      properties:
        code:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
    CreateMatchRequest:
      type: object
      required:
        - stage_id
        - kickoff_at
      properties:
        stage_id:
          type: string
          format: uuid
          maxLength: 36
        kickoff_at:
          type: string
          format: date-time
          maxLength: 30
        home_entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        away_entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        venue_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        group_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        code:
          type: string
          nullable: true
          maxLength: 50
          pattern: ^.{0,50}$
        home_label:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        away_label:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
    GenerateMatchesRequest:
      type: object
      required:
        - stage_id
        - algorithm
      properties:
        stage_id:
          type: string
          format: uuid
          maxLength: 36
        algorithm:
          type: string
          enum:
            - round_robin_circle
            - knockout_seeded
        options:
          type: object
          additionalProperties: true
    GenerationJob:
      type: object
      required:
        - job_id
        - status
      properties:
        job_id:
          type: string
          maxLength: 36
          pattern: ^.{0,36}$
        status:
          type: string
          enum:
            - queued
            - running
            - completed
            - failed
    Match:
      type: object
      required:
        - id
        - edition_id
        - status
        - kickoff_at
        - home_entry_id
        - away_entry_id
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        edition_id:
          type: string
          format: uuid
          maxLength: 36
        stage_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        group_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        group_code:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        code:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        round_label:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        status:
          $ref: '#/components/schemas/MatchStatus'
        kickoff_at:
          type: string
          format: date-time
          maxLength: 30
        venue_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        venue_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        home_entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        home_entry_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        away_entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        away_entry_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        home_score:
          $ref: '#/components/schemas/ScoreBreakdown'
        away_score:
          $ref: '#/components/schemas/ScoreBreakdown'
        outcome:
          type: string
          enum:
            - home_win
            - away_win
            - draw
            - forfeit_home
            - forfeit_away
            - cancelled
            - postponed
        events:
          type: array
          items:
            $ref: '#/components/schemas/MatchEvent'
          maxItems: 200
    MatchStatus:
      type: string
      enum:
        - scheduled
        - in_progress
        - finalized
        - disputed
    ScoreBreakdown:
      type: object
      properties:
        regulation:
          type: integer
          minimum: 0
          format: int32
          maximum: 2147483647
        extra_time:
          type: integer
          minimum: 0
          nullable: true
          format: int32
          maximum: 2147483647
        penalties:
          type: integer
          minimum: 0
          nullable: true
          format: int32
          maximum: 2147483647
    MatchEvent:
      type: object
      required:
        - id
        - match_id
        - team_side
        - event_type
        - minute
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        match_id:
          type: string
          format: uuid
          maxLength: 36
        team_side:
          type: string
          enum:
            - home
            - away
        squad_member_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        event_type:
          type: string
          enum:
            - goal
            - own_goal
            - penalty_goal
            - assist
            - yellow_card
            - red_card
        minute:
          type: integer
          minimum: 0
          format: int32
          maximum: 2147483647
        stoppage_time:
          type: integer
          minimum: 0
          nullable: true
          format: int32
          maximum: 2147483647
    MatchEventInput:
      type: object
      required:
        - team_side
        - event_type
        - minute
      properties:
        team_side:
          type: string
          enum:
            - home
            - away
        squad_member_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        event_type:
          type: string
          enum:
            - goal
            - own_goal
            - penalty_goal
            - assist
            - yellow_card
            - red_card
        minute:
          type: integer
          minimum: 0
          format: int32
          maximum: 2147483647
        stoppage_time:
          type: integer
          minimum: 0
          nullable: true
          format: int32
          maximum: 2147483647
    UpdateMatchRequest:
      type: object
      properties:
        code:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        home_entry_id:
          type: string
          format: uuid
          maxLength: 36
        away_entry_id:
          type: string
          format: uuid
          maxLength: 36
        home_label:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        away_label:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        kickoff_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        venue_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        status:
          $ref: '#/components/schemas/MatchStatus'
        score:
          type: object
          properties:
            home:
              $ref: '#/components/schemas/ScoreBreakdown'
            away:
              $ref: '#/components/schemas/ScoreBreakdown'
        events:
          type: array
          items:
            $ref: '#/components/schemas/MatchEventInput'
          maxItems: 200
        admin_notes:
          type: string
          maxLength: 2000
          pattern: ^.{0,2000}$
    CreateDisputeRequest:
      type: object
      required:
        - reason
      properties:
        reason:
          type: string
          maxLength: 2000
          pattern: ^.{0,2000}$
    Dispute:
      type: object
      required:
        - id
        - match_id
        - submitted_by
        - status
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        match_id:
          type: string
          format: uuid
          maxLength: 36
        submitted_by:
          $ref: '#/components/schemas/UserSummary'
        status:
          type: string
          enum:
            - open
            - resolved
            - rejected
        created_at:
          type: string
          format: date-time
          maxLength: 30
        resolution_notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
    UserSummary:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        email:
          type: string
          format: email
          maxLength: 254
    Team:
      type: object
      required:
        - id
        - name
        - slug
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        contact_email:
          type: string
          format: email
          nullable: true
          maxLength: 254
        contact_phone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    CreateTeamRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          nullable: true
          maxLength: 120
          pattern: ^.{0,120}$
        contact_email:
          type: string
          format: email
          nullable: true
          maxLength: 254
        contact_phone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    UpdateTeamRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          nullable: true
          maxLength: 120
          pattern: ^.{0,120}$
        contact_email:
          type: string
          format: email
          nullable: true
          maxLength: 254
        contact_phone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    AddTeamMemberRequest:
      type: object
      required:
        - first_name
        - last_name
      properties:
        first_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        last_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        preferred_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        country:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        role:
          type: string
          enum:
            - player
            - coach
            - manager
            - staff
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
    UpdateTeamMemberRequest:
      type: object
      properties:
        first_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        last_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        preferred_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        country:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        role:
          type: string
          enum:
            - player
            - coach
            - manager
            - staff
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
    TeamMember:
      type: object
      required:
        - membership_id
        - person
      properties:
        membership_id:
          type: string
          format: uuid
          maxLength: 36
        person:
          $ref: '#/components/schemas/Person'
        role:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        status:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        joined_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        left_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
    TeamRoster:
      type: object
      required:
        - team
        - members
      properties:
        team:
          $ref: '#/components/schemas/Team'
        members:
          type: array
          items:
            $ref: '#/components/schemas/TeamMember'
          maxItems: 200
    CompetitionSummary:
      type: object
      required:
        - id
        - name
        - slug
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
    CompetitionListResponse:
      type: object
      required:
        - competitions
      properties:
        competitions:
          type: array
          items:
            $ref: '#/components/schemas/CompetitionSummary'
          maxItems: 200
    TeamSummary:
      type: object
      required:
        - id
        - name
        - slug
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
    TeamListResponse:
      type: object
      required:
        - teams
      properties:
        teams:
          type: array
          items:
            $ref: '#/components/schemas/TeamSummary'
          maxItems: 200
    EntryReview:
      type: object
      required:
        - entry
        - team
      properties:
        entry:
          $ref: '#/components/schemas/Entry'
        team:
          $ref: '#/components/schemas/TeamSummary'
    EntryReviewListResponse:
      type: object
      required:
        - entries
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/EntryReview'
          maxItems: 200
    Entry:
      type: object
      required:
        - id
        - team_id
        - edition_id
        - status
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        team_id:
          type: string
          format: uuid
          maxLength: 36
        edition_id:
          type: string
          format: uuid
          maxLength: 36
        status:
          type: string
          enum:
            - pending
            - approved
            - rejected
            - withdrawn
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
        submitted_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        approved_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        rejected_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        decision_reason:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    EntryWithSquad:
      type: object
      required:
        - entry
        - squad
      properties:
        entry:
          $ref: '#/components/schemas/Entry'
        squad:
          $ref: '#/components/schemas/Squad'
    UpdateEntryStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum:
            - approved
            - rejected
        reason:
          type: string
          maxLength: 2000
          pattern: ^.{0,2000}$
    RegisterEntryRequest:
      type: object
      required:
        - edition_id
      properties:
        edition_id:
          type: string
          format: uuid
          maxLength: 36
        notes:
          type: string
          maxLength: 2000
          nullable: true
          pattern: ^.{0,2000}$
    Squad:
      type: object
      required:
        - id
        - entry_id
        - locked_at
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        locked_at:
          type: string
          format: date-time
          nullable: true
          maxLength: 30
        members:
          type: array
          items:
            $ref: '#/components/schemas/SquadMember'
          maxItems: 200
    UpdateSquadRequest:
      type: object
      properties:
        lock:
          type: boolean
    SquadMember:
      type: object
      required:
        - id
        - squad_id
        - person_id
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        squad_id:
          type: string
          format: uuid
          maxLength: 36
        membership_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        person_id:
          type: string
          format: uuid
          maxLength: 36
        person:
          $ref: '#/components/schemas/Person'
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
        position:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        availability:
          type: string
          enum:
            - available
            - doubtful
            - injured
            - suspended
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
    SquadMemberListResponse:
      type: object
      required:
        - members
      properties:
        members:
          type: array
          items:
            $ref: '#/components/schemas/SquadMember'
          maxItems: 200
    AddSquadMemberRequest:
      type: object
      properties:
        membership_id:
          type: string
          format: uuid
          maxLength: 36
        team_id:
          type: string
          format: uuid
          maxLength: 36
          description: Required when creating a new person
        person:
          $ref: '#/components/schemas/CreatePersonRequest'
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
        position:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        availability:
          type: string
          enum:
            - available
            - doubtful
            - injured
            - suspended
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
    CreatePersonRequest:
      type: object
      required:
        - first_name
        - last_name
      properties:
        first_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        last_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        preferred_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        country:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        birth_date:
          type: string
          format: date
          nullable: true
          maxLength: 10
    Person:
      type: object
      required:
        - id
        - full_name
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        full_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        first_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        last_name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        preferred_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        date_of_birth:
          type: string
          format: date
          nullable: true
          maxLength: 10
        role:
          type: string
          enum:
            - player
            - coach
            - staff
    Notification:
      type: object
      required:
        - id
        - type
        - created_at
        - read
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        type:
          type: string
          enum:
            - entry_approved
            - schedule_changed
            - match_finalized
            - dispute_resolved
            - announcement
        created_at:
          type: string
          format: date-time
          maxLength: 30
        read:
          type: boolean
        payload:
          type: object
          additionalProperties: true
    MarkNotificationsRequest:
      type: object
      required:
        - notification_ids
      properties:
        notification_ids:
          type: array
          minItems: 1
          items:
            type: string
            format: uuid
            maxLength: 36
          maxItems: 200
    ScoreboardPayload:
      type: object
      required:
        - edition
        - matches
        - standings
        - top_scorers
        - rotation
      properties:
        edition:
          $ref: '#/components/schemas/Edition'
        matches:
          type: array
          items:
            $ref: '#/components/schemas/ScoreboardMatch'
          maxItems: 200
        standings:
          type: array
          items:
            $ref: '#/components/schemas/Standing'
          maxItems: 200
        tables:
          type: array
          items:
            $ref: '#/components/schemas/GroupTable'
          maxItems: 200
        top_scorers:
          type: array
          items:
            $ref: '#/components/schemas/TopScorer'
          maxItems: 200
        rotation:
          type: array
          description: Configured rotation sections for big-screen display
          items:
            type: string
            enum:
              - live_matches
              - upcoming
              - standings
              - top_scorers
          maxItems: 200
    ScoreboardMatch:
      type: object
      required:
        - id
        - status
        - kickoff_at
        - home
        - away
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        status:
          $ref: '#/components/schemas/MatchStatus'
        kickoff_at:
          type: string
          format: date-time
          maxLength: 30
        code:
          type: string
          nullable: true
          description: Match code (e.g. A-01)
          maxLength: 2048
          pattern: ^.{0,2048}$
        group_code:
          type: string
          nullable: true
          description: Group code for group-stage matches
          maxLength: 2048
          pattern: ^.{0,2048}$
        home:
          $ref: '#/components/schemas/ScoreboardSide'
        away:
          $ref: '#/components/schemas/ScoreboardSide'
        highlight:
          type: string
          nullable: true
          description: Optional admin-triggered overlay message
          maxLength: 2048
          pattern: ^.{0,2048}$
        venue_name:
          type: string
          nullable: true
          description: Venue or playing surface name
          maxLength: 200
          pattern: ^.{0,200}$
    ScoreboardSide:
      type: object
      required:
        - entry_id
        - name
        - score
      properties:
        entry_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        score:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        extra_time:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          nullable: true
        penalties:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          nullable: true
    Standing:
      type: object
      required:
        - entry_id
        - played
        - won
        - drawn
        - lost
        - goals_for
        - goals_against
        - points
      properties:
        entry_id:
          type: string
          format: uuid
          maxLength: 36
        position:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        played:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        won:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        drawn:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        lost:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        goals_for:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        goals_against:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        goal_difference:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        points:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        fair_play_score:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
    GroupTable:
      type: object
      required:
        - group_id
        - group_code
        - standings
      properties:
        group_id:
          type: string
          format: uuid
          maxLength: 36
        group_code:
          type: string
          maxLength: 2048
          pattern: ^.{0,2048}$
        group_name:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^.{0,200}$
        standings:
          type: array
          items:
            $ref: '#/components/schemas/Standing'
          maxItems: 200
    Venue:
      type: object
      required:
        - id
        - competition_id
        - name
        - slug
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        competition_id:
          type: string
          format: uuid
          maxLength: 36
        edition_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        address:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
        timezone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        created_at:
          type: string
          format: date-time
          maxLength: 30
    VenueListResponse:
      type: object
      required:
        - venues
      properties:
        venues:
          type: array
          items:
            $ref: '#/components/schemas/Venue'
          maxItems: 200
    CreateVenueRequest:
      type: object
      required:
        - name
        - slug
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        edition_id:
          type: string
          format: uuid
          nullable: true
          maxLength: 36
        address:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
        timezone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    UpdateVenueRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        slug:
          type: string
          maxLength: 120
          pattern: ^.{0,120}$
        address:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
        notes:
          type: string
          nullable: true
          maxLength: 2000
          pattern: ^.{0,2000}$
        timezone:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    TopScorer:
      type: object
      required:
        - person_id
        - entry_id
        - goals
      properties:
        person_id:
          type: string
          format: uuid
          maxLength: 36
        entry_id:
          type: string
          format: uuid
          maxLength: 36
        name:
          type: string
          maxLength: 200
          pattern: ^.{0,200}$
        jersey_number:
          type: integer
          nullable: true
          format: int32
          minimum: 0
          maximum: 2147483647
        goals:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        assists:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        yellow_cards:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
        red_cards:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
    EventFeed:
      type: object
      required:
        - items
        - next_cursor
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/EventEnvelope'
          maxItems: 200
        next_cursor:
          type: string
          nullable: true
          maxLength: 2048
          pattern: ^.{0,2048}$
    EventEnvelope:
      type: object
      required:
        - id
        - type
        - occurred_at
        - payload
      properties:
        id:
          type: string
          format: uuid
          maxLength: 36
        type:
          type: string
          enum:
            - match_updated
            - match_finalized
            - schedule_changed
            - entry_status_changed
            - notification
        occurred_at:
          type: string
          format: date-time
          maxLength: 30
        payload:
          type: object
          additionalProperties: true
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Bearer access token for authenticated API requests. JWT handling follows RFC8725 best practices.
    sessionCookie:
      type: apiKey
      in: cookie
      name: tournament.session
      description: Signed session cookie for browser-based access.
  headers:
    Access-Control-Allow-Origin:
      description: Allowed origin for cross-origin requests.
      schema:
        type: string
        maxLength: 2048
        pattern: ^\S+$
    RateLimit-Limit:
      description: The maximum number of requests permitted in the current window.
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 10000
    RateLimit-Remaining:
      description: The number of remaining requests in the current window.
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 10000
    RateLimit-Reset:
      description: Seconds remaining until the rate limit window resets.
      schema:
        type: integer
        format: int32
        minimum: 0
        maximum: 86400
    Retry-After:
      description: Seconds to wait before making a new request.
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 86400
security:
  - bearerAuth: []
  - sessionCookie: []
